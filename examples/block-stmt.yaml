tokens:
  text: \w+

error: err

grammar:
  blocks:
    - blocks block
    - block
  block: 
    - |
      {
        stmt-list
      }
    - "{ }"
  stmt-list:
    - estmt stmt-list
    - estmt
  estmt: 
    - stmt ;
    - err ;
  stmt: first text
  first: text =


code:
  main: str(blocks())
  blocks:
    - blocks() + [block()]
    - '[block()]'
  block: 
    - return {k:v for k, v in vars()['stmt-list']()}
    - return {}
  stmt-list:
    - estmt() + vars()['stmt-list']()
    - estmt()
  estmt: 
    - '[stmt()]'
    - '[("test", err[0])]'
  stmt: (first(), text[0])
  first: text[0]

meta:
  tokens:
    ref: '@token@'
    # ignore: '\s'
